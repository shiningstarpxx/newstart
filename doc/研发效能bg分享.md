#### 研发效能BG分享

#### authur: Pei, Xingxin

#### email: xingxinpei@gmail.com



### 正文

接下来每一段代表了一页PPT内容

#### 1

hi，各位小伙伴好，我是来自腾讯医疗资讯与服务部的michael，主要负责腾讯云医的研发。这次主要来和大家分享，云医DevOps落地实践的回顾，以及这个过程中，我们获得来自质量部，云四部，运营部等部门的帮助

#### 2

本次分享的主题分为两个部分，第一个部分是整体的背景，包括了业务背景，以及我们研发侧为什么需要联合各个兄弟部门来一起做些有趣的事情。

第二个部分是，我们整体落地的过程，大致分为了1.0， 2.0， 3.0 三个part。

下面我们先进入第一个部分，背景

#### 3

腾讯云医是基于微信小程序打造一款，服务于医生和患者的云上医疗平台，具体形式如右图所示，我们涵盖了整个问诊的流程，也包括了处方，购买药物，以及基于医生，患者的关系链体系的相关功能

#### 4

腾讯云医的整体后台情况呢，如右图所示，我们实现了整体的云原生体系。整体上呢，我们采用的是微服务架构模式，所以在业务从0到1，从小到大的过程中，天然有一个问题，就是微服务的数量增长很快。而且这去年这个时候，新组建的团队，几乎没有研效的体系，也没有服务整体可观测体系，我们面临的两个核心问题是，开发效率比较低，通常两个星期才有一次版本发布，而且一旦线上有问题，我们排查很困难，基本上都是排查+碰运气的方式登陆一个个服务查看日志

#### 5

我们针对我们的研发现状深入分析后发现，我们主要是以下四个问题

1. 缺乏开发规划，开发模式不统一，有人有自测环境，有人喜欢在测试环境验证，有人是分支发布，有人是主干发布；服务框架上也是各有特色； 
2. 没有CI/CD，测试，发布完全靠手动，尴尬的时候，测试同学测试了一天才发现测试的版本不对
3. 代码也不规范，风格千奇百怪， 互相修改的时候，目录都要翻一遍才知道怎么下手；另外，也没有门禁测试，偶现的接口没有向前兼容，在业务迭代多次后，已经成固定规律出现
4. 测试环境只有一套，大家排队等测试；同时，测试也完全依赖手工

#### 6

线上定位问题慢，主要是下面三个原因 

#### 7

背景聊完后，我们下面分三个版本迭代，来分享我们是如何一步步提升整体研发效率和质量的

#### 8

这两年效能在业界越来越火，公司和BG也都投入了不少人力物力来实践；整体上看，研发迭代从之前的瀑布模式，逐步过渡到了现在的devops模式，一个核心点就是开发，测试，部署越来越一体化，而不是分割的三个阶段。

而整个devops的阶段细分后，分成了下面个五个域

#### 9

我们的解决问题指导思想，就是分治；先把问题按域话费，按域分别解决后，然后再整体串起来，就可以比较好的完成一次大的迭代。整个过程中，我们主要是和质量部做了深入的合作，彼此依靠来更好的服务业务

整个问题按域拆解后，我们的面临的问题具体来看是



针对这些问题，我们的解决死了是

#### 10

开发域我们解决问题的手段是统一开发模式

#### 11

构建/部署域我们解决问题的手段是构建流水线

#### 12

测试域效能提升的手段是自动化拨测

#### 13

测试域效能提升的另一个手段是，测试环境建设

#### 14

测试环境建设的方案如图，

效果是

#### 15

运营域的提升，我们主要是依赖监控的建设

#### 16

整个第一阶段，在几个域各自做了一轮优化后，主要是做了以下几方面的工作

我们解决了***

#### 17

第一个阶段，其实是投入少，见效快的；紧接着，我们面临的问题是越来越困难的， 具体来看，每个域



#### 18

于是我们启动了研效2.0的建设，这个



